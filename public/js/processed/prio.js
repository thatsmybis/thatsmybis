var PINNED_ITEMS="thatsmybis.pinnedItems";function applyNoteToggleHandlers(){$(".js-toggle-note").off(),$(".js-toggle-note").change(function(){var e=$(this).data("index");console.log("index is",e),$(this).prop("checked")?$(".js-note[data-index="+e+"]").parent().show():$(".js-note[data-index="+e+"]").parent().hide()})}function makeIconLight(e){e.removeClass("fas"),e.addClass("fal")}function makeIconSolid(e){e.removeClass("fal"),e.addClass("fas")}function sortItems(){var e=[],t=Cookies.get(PINNED_ITEMS);t&&((e=JSON.parse(t))||(e=[])),$(".js-pin-sortable").each(function(){var t=$(this).data("itemId");if(e.find(function(e){return e===t})){var n=-1e6+e.indexOf(t);$(this).attr("data-user-order",n),makeIconSolid($(this).find(".js-pin-item"))}else{var a=$(this).attr("data-original-order");$(this).attr("data-user-order",a),makeIconLight($(this).find(".js-pin-item"))}}),$("#pinnableList").children(".js-pin-sortable").sort(function(e,t){var n,a;return parseInt(e.getAttribute("data-user-order"))>parseInt(t.getAttribute("data-user-order"))?1:-1}).appendTo($("#pinnableList")),setTimeout(function(){$(".tooltip").remove()},100)}function updatePlaceholders(){$("ol.js-sortable-lazy").each(function(){var e=0;$(this).find('input[name$="[order]"]').each(function(){e++,$(this).attr("placeholder",e)})})}$(document).ready(function(){warnBeforeLeaving("#editForm"),$(".js-sortable-lazy").one("mouseenter",function(){$(this).sortable({handle:".js-sort-handle",stop:function stop(e,t){updatePlaceholders()}})}),$(".js-pin-item").click(function(){var e=$(this).data("itemId"),t=Cookies.get(PINNED_ITEMS);if(t){var n=JSON.parse(t);n.find(function(t){return t===e})?(n=n.filter(function(t){return t!==e}),Cookies.set(PINNED_ITEMS,JSON.stringify(n))):(n.push(e),Cookies.set(PINNED_ITEMS,JSON.stringify(n)))}else{var a=[];a.push(e),Cookies.set(PINNED_ITEMS,JSON.stringify(a))}sortItems()}),sortItems(),$(".js-reset-ranks").click(function(){var e=$(this).data("index");$("input.js-rank[data-index='".concat(e,"']")).val("")}),$(".js-reset-all-ranks").click(function(){confirm("This will remove any manually input numbers for prio ranks. You can review this before you submit the page. Continue?")&&$("input.js-rank").val("")}),applyNoteToggleHandlers(),$("select.js-input-select").change(function(){console.log("applying handlers"),applyNoteToggleHandlers()}),$(".loadingBarContainer").removeClass("d-flex").hide(),$("#editForm").show()});
