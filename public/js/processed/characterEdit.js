var firstLoad=!0,characterLoadIndex=0;function addCharacter(a){if($(".js-name").eq(characterLoadIndex).length&&a.name){var e=ucfirst(a.classID&&WARCRAFTLOGS_CLASSES[a.classID]?WARCRAFTLOGS_CLASSES[a.classID].slug:"");return $(".js-name").eq(characterLoadIndex).val(a.name),$(".js-name").eq(characterLoadIndex).change(),e&&($(".js-class").eq(characterLoadIndex).val(e),$(".js-class").eq(characterLoadIndex).change()),characterLoadIndex++,!0}return!1}function parseCharacterList(a){var e=null;!(e=Papa.parse(a,{delimiter:""})).errors||!e.errors.length||e.data&&e.data[0].length>1||(e=Papa.parse(a,{delimiter:" "})),e=e.data&&e.data[0].length>1?e.data[0]:[];var t=[];return e.length&&e.forEach(function(a){t.push([a,{name:a,classID:null}])}),t}$(document).ready(function(){$(".js-character").click(function(){$(this).next(".js-character").first().show()}),$(".js-character").change(function(){firstLoad||$(this).next(".js-character").first().show()}),$(".js-class").change(function(){var a=$(this).data("index"),e=$(this).val();if(e){var t=$(".js-spec[data-index=".concat(a,"] option:selected")).data("class");firstLoad||t==e||$(".js-spec[data-index=".concat(a,"]")).val(""),$(".js-spec[data-index=".concat(a,"]")).prop("disabled",!1),$(".js-spec[data-index=".concat(a,"] option")).prop("disabled",!1).show(),$(".js-spec[data-index=".concat(a,"] option")).not("[value='']").not("[data-class='"+e+"']").prop("disabled",!0).hide(),$(".js-spec-label[data-index=".concat(a,"]")).prop("disabled",!1)}else $(".js-spec[data-index=".concat(a,"]")).val(""),$(".js-spec[data-index=".concat(a,"]")).prop("disabled",!0),$(".js-spec-label[data-index=".concat(a,"]")).val(""),$(".js-spec-label[data-index=".concat(a,"]")).prop("disabled",!0)}).change(),$(".js-spec").change(function(){var a=$(this).data("index"),e=$(".js-archetype[data-index=".concat(a,"]")).val(),t=$(this).find(":selected").data("archetype");!firstLoad&&t&&e!=t&&($(".js-archetype[data-index=".concat(a,"]")).val(t),flashElement($(".js-archetype[data-index=".concat(a,"]"))))}).change();var a=$("[name^=logs]:visible"),e=[];a.each(function(){$(this).val()&&(log=new URL($(this).val()),log.pathname.split("/").forEach(function(a){16!==a.length||e.push(a)}))}),$("#addWarcraftlogsCharacters").click(function(){if(confirm("This WILL OVERWRITE any existing inputs in this form. Continue?")){$(".js-name").val(""),$(".js-class").val(""),$(".js-archetype").val(""),$(".js-spec-label").val(""),$(".js-spec").val("");var a=$("[name^=logs]:visible");if(characterLoadIndex=0,a.val().includes("warcraftlogs.com"))hasLinkedWarcraftLogs?getWarcraftlogsRankedCharacters(addCharacter,WARCRAFTLOGS_MODE_NEW):$(".js-warcraftlogs-attendees-message").html('<span class="font-weight-bold text-warning">Connect your Warcraft Logs account in guild settings to import</span>').show();else{var e=parseCharacterList(a.val());printWarcraftlogsRankedCharacters(e,addCharacter,WARCRAFTLOGS_MODE_NEW)}characterLoadIndex=0}}),$(".js-name").each(function(){$(this).val()&&$(this).click()}),addInputAntiSubmitHandler(),firstLoad=!1});
