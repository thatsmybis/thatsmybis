function _readOnlyError(a){throw new Error('"'+a+'" is read-only')}var table=null,colName=0,colPrios=1,colWishlist=2,colLoot=3,colRecipes=4,colRoles=5,colNotes=6,colClass=7,colRaidGroup=8,colRaidsAttended=11,allItemsVisible=!1,strikethroughVisible=!0,offspecVisible=!0,rosterHandlersTimeout=null;function createRosterMainTable(){return $.fn.DataTable.isDataTable("#characterTable")&&$("#characterTable").destroy(),rosterTable=$("#characterTable").DataTable({autoWidth:!1,data:characters,oLanguage:{sSearch:"<abbr title='Fuzzy searching is ON. To search exact text, wrap your search in \"quotes\"'>Search</abbr>"},columns:[{title:'<span class="fas fa-fw fa-user"></span> '.concat(headerCharacter,' <span class="text-muted small">(').concat(characters.length,")</span>"),data:"character",render:function render(a,e,t){return'\n                    <ul class="no-bullet no-indent mb-2">\n                        <li>\n                            <div class="dropdown text-'.concat(t.class?t.class.toLowerCase():"",'">\n                                <a class="dropdown-toggle text-4 font-weight-bold text-').concat(t.class?t.class.toLowerCase():"",'"\n                                    id="character').concat(t.id,'Dropdown"\n                                    role="button"\n                                    data-toggle="dropdown"\n                                    aria-haspopup="true"\n                                    aria-expanded="false"\n                                    title="').concat(t.username?t.username:"",'">\n                                    ').concat(t.name,'\n                                </a>\n                                <div class="dropdown-menu" aria-labelledby="character').concat(t.id,'Dropdown">\n                                    <a class="dropdown-item" href="/').concat(guild.id,"/").concat(guild.slug,"/c/").concat(t.id,"/").concat(t.slug,'">Profile</a>\n                                    <a class="dropdown-item" href="/').concat(guild.id,"/").concat(guild.slug,"/audit-log?character_id=").concat(t.id,'">History</a>\n                                    ').concat(showEdit?'<a class="dropdown-item" href="/'.concat(guild.id,"/").concat(guild.slug,"/c/").concat(t.id,"/").concat(t.slug,'/edit">Edit</a>\n                                        <a class="dropdown-item" href="/').concat(guild.id,"/").concat(guild.slug,"/c/").concat(t.id,"/").concat(t.slug,'/loot">Wishlist & Loot</a>'):"","\n                                    ").concat(t.member_id?'<a class="dropdown-item" href="/'.concat(guild.id,"/").concat(guild.slug,"/u/").concat(t.member_id,"/").concat(t.username?t.username.toLowerCase():"view member",'">').concat(t.username?t.username:"view member","</a>"):"","\n                                </div>\n                            </div>\n                        </li>\n                        ").concat(t.is_alt||t.raid_group_name||t.class?"\n                            <li>\n                                ".concat(t.is_alt?'\n                                    <span class="text-warning font-weight-bold">'.concat(localeAlt,"</span>&nbsp;\n                                "):"","\n                                ").concat(t.raid_group_name?'\n                                    <span class="font-weight-bold d-inline tag">\n                                        <span class="role-circle" style="background-color:'.concat(getColorFromDec(parseInt(t.raid_group_color)),'"></span>\n                                        ').concat(t.raid_group_name?t.raid_group_name:"","\n                                    </span>&nbsp;\n                                "):"","\n                                ").concat(t.class?t.class:"","\n                            </li>"):"","\n\n                        ").concat(!guild.is_attendance_hidden&&(t.attendance_percentage||t.raid_count||t.benched_count)?'<li>\n                                <ul class="list-inline">\n                                    '.concat(t.raid_count&&"number"==typeof t.attendance_percentage?'<li class="list-inline-item '.concat(getAttendanceColor(t.attendance_percentage),'" title="attendance">').concat(Math.round(100*t.attendance_percentage),"%</li>"):"","\n                                    ").concat(t.raid_count?'<li class="list-inline-item small text-muted">'.concat(t.raid_count," raid").concat(t.raid_count>1?"s":"","</li>"):"","\n                                    ").concat(t.benched_count?'<li class="list-inline-item small text-muted">benched '.concat(t.benched_count,"x</li>"):"","\n                                </ul>\n                            </li>"):"","\n\n                        ").concat(t.level||t.race||t.spec?'\n                            <li>\n                                <span class="small text-muted">\n                                    '.concat(t.level?t.level:"",'\n                                    <span class="font-weight-bold">\n                                        ').concat(t.race?t.race:"","\n                                        ").concat(t.spec_label?t.spec_label:t.spec?t.spec:"","\n                                    </span>\n                                </span>\n                            </li>"):"","\n\n                        ").concat(t.rank||t.profession_1||t.profession_2?'\n                            <li>\n                                <span class="small text-muted">\n                                    '.concat(t.rank?"Rank "+t.rank+(t.profession_1||t.profession_2?",":""):"","\n                                    ").concat(t.profession_1?t.profession_1+(t.profession_2?",":""):"","\n                                    ").concat(t.profession_2?t.profession_2:"","\n                                </span>\n                            </li>"):"","\n                        ").concat(showEdit?"\n                            ".concat(t.is_received_unlocked?'<li class="list-inline-item small text-warning" title="To lock, edit the member that owns this character">loot unlocked</li>':"","\n                            ").concat(t.is_wishlist_unlocked?'<li class="list-inline-item small text-warning" title="To lock, edit the member that owns this character">wishlist unlocked</li>':"","\n                            "):"","\n                    </ul>")},visible:!0,width:"250px",className:"width-250"},{title:'<span class="text-gold fas fa-fw fa-sort-amount-down"></span> '.concat(headerPrios),data:"prios",render:function render(a,e,t){return a&&a.length?getItemListHtml(a,"prio",t.id,!0):"—"},orderable:!1,visible:!!showPrios,width:"280px",className:"width-280"},{title:'<span class="text-legendary fas fa-fw fa-scroll-old"></span> '.concat(headerWishlist,'\n                    <span class="js-sort-wishlists text-link">\n                        <span class="fas fa-fw fa-exchange cursor-pointer"></span>\n                    </span>'),data:"all_wishlists",render:function render(a,e,t){function createWishlistHtml(a,e,t,n,i,l){a=a.filter(function(a){return a.list_number==i});var s=null,c;(l&&(s=wishlistNames&&wishlistNames[i]?wishlistNames[i]:headerWishlist+" "+i),a.length)&&(n+=getItemListHtml(a.slice().sort(function(a,e){return a.instance_order-e.instance_order||a.pivot.order-e.pivot.order}),"wishlist",t.id,!0,!0,"js-wishlist-sorted",!!guild.do_sort_items_by_instance,l?s:null),n+=getItemListHtml(a,"wishlist",t.id,!0,!1,"js-wishlist-unsorted",!guild.do_sort_items_by_instance,l?s:null));return n}if(a&&a.length){var n="";if(currentWishlistNumber)n=createWishlistHtml(a,e,t,n,currentWishlistNumber,!1);else for(i=1;i<=maxWishlistLists;i++)n=createWishlistHtml(a,e,t,n,i,!0);return""==n&&(n="—"),n}return"—"},orderable:!1,visible:!!showWishlist,width:"280px",className:"width-280"},{title:'<span class="text-success fas fa-fw fa-sack"></span> '.concat(headerReceived),data:"received",render:function render(a,e,t){return a&&a.length?getItemListHtml(a,"received",t.id):"—"},orderable:!1,visible:!0,width:"280px",className:"width-280"},{title:'<span class="text-gold fas fa-fw fa-book"></span> '.concat(headerRecipes),data:"recipes",render:function render(a,e,t){return a&&a.length?getItemListHtml(a,"recipes",t.id):"—"},orderable:!1,visible:!1,width:"280px",className:"width-280"},{title:"Roles",data:"user.roles",render:function render(a,e,t){var n="";return a&&a.length>0?(n='<ul class="list-inline">',a.forEach(function(a,e){var t=0!=a.color?"#"+rgbToHex(a.color):"#FFFFFF";n+='<li class="list-inline-item"><span class="tag" style="border-color:'.concat(t,';"><span class="role-circle" style="background-color:').concat(t,'"></span>').concat(a.name,"</span></li>")}),n+="</ul>"):n="—",n},orderable:!1,visible:!1},{title:'<span class="fas fa-fw fa-comment-alt-lines"></span> '.concat(headerNotes),data:"public_note",render:function render(a,e,t){return getNotes(a,e,t)},orderable:!1,visible:!0,width:"280px",className:"width-280"},{title:"Class",data:"class",render:function render(a,e,t){return t.class?t.class:null},visible:!1},{title:"Raid Group",data:"raid_group",render:function render(a,e,t){var n=""+(t.raid_group_id?t.raid_group_id:"");return t.secondary_raid_groups&&t.secondary_raid_groups.length&&t.secondary_raid_groups.forEach(function(a,e){n+="".concat(a.id," ")}),n},visible:!1},{title:"Username",data:"username",render:function render(a,e,t){return t.username?t.username:null},visible:!1},{title:"Discord Username",data:"discord_username",render:function render(a,e,t){return t.discord_username?t.discord_username:null},visible:!1},{title:"Raids Attended",data:"raid_count",render:function render(a,e,t){return t.raid_count?t.raid_count:null},visible:!1,searchable:!1},{title:"Benched Count",data:"benched_count",render:function render(a,e,t){return t.benched_count?t.benched_count:null},visible:!1,searchable:!1}],order:[],paging:!1,fixedHeader:!0,drawCallback:function drawCallback(){callRosterHandlers()},initComplete:function initComplete(){var a=[colClass,colRaidGroup];this.api().columns().every(function(e){var t=this,n=null,i=null;e==colClass?(n=$("#class_filter"),i=null):e==colRaidGroup&&(n=$("#raid_group_filter"),i=null),a.includes(e)&&(n.on("change",function(){var a=$.fn.dataTable.util.escapeRegex($(this).val());i&&i.val()&&(_readOnlyError("val"),a="(?=.*"+a+")(?=.*"+$.fn.dataTable.util.escapeRegex(i.val())+")"),t.search(a||"",!0,!1).draw()}).change(),i&&i.on("change",function(){var a=$.fn.dataTable.util.escapeRegex($(this).val());n&&n.val()&&(_readOnlyError("val"),a="(?=.*"+a+")(?=.*"+$.fn.dataTable.util.escapeRegex(n.val())+")"),t.search(a||"",!0,!1).draw()}).change()),"undefined"!=typeof filterWishlistsByItemName&&filterWishlistsByItemName&&e==colWishlist&&$("#wishlist_filter").on("change",function(){var a="("+itemNames.join("|")+")";t.search(a,!0,!1).draw()})}),callRosterHandlers()}}),rosterTable}function createRosterStatsTable(){return $.fn.DataTable.isDataTable("#characterTable")&&$("#characterTable").destroy(),rosterTable=$("#characterTable").DataTable({autoWidth:!1,data:characters,oLanguage:{sSearch:"<abbr title='Fuzzy searching is ON. To search exact text, wrap your search in \"quotes\"'>Search</abbr>"},columns:[{title:'<span class="fas fa-fw fa-user"></span> '.concat(headerCharacter,' <span class="text-muted small">(').concat(characters.length,")</span>"),data:"character",render:function render(a,e,t){return'\n                    <ul class="no-bullet no-indent mb-2">\n                        <li>\n                            <ul class="list-inline">\n                                <li class="list-inline-item">\n                                    <div class="dropdown text-'.concat(t.class?t.class.toLowerCase():"",'">\n                                        <a class="dropdown-toggle text-5 font-weight-bold text-').concat(t.class?t.class.toLowerCase():"",'"\n                                            id="character').concat(t.id,'Dropdown"\n                                            role="button"\n                                            data-toggle="dropdown"\n                                            aria-haspopup="true"\n                                            aria-expanded="false"\n                                            title="').concat(t.username?t.username:"",'">\n                                            ').concat(t.name,'\n                                        </a>\n                                        <div class="dropdown-menu" aria-labelledby="character').concat(t.id,'Dropdown">\n                                            <a class="dropdown-item" href="/').concat(guild.id,"/").concat(guild.slug,"/c/").concat(t.id,"/").concat(t.slug,'">Profile</a>\n                                            <a class="dropdown-item" href="/').concat(guild.id,"/").concat(guild.slug,"/audit-log?character_id=").concat(t.id,'">History</a>\n                                            ').concat(showEdit?'<a class="dropdown-item" href="/'.concat(guild.id,"/").concat(guild.slug,"/c/").concat(t.id,"/").concat(t.slug,'/edit">Edit</a>\n                                                <a class="dropdown-item" href="/').concat(guild.id,"/").concat(guild.slug,"/c/").concat(t.id,"/").concat(t.slug,'/loot">Wishlist & Loot</a>'):"","\n                                            ").concat(t.member_id?'<a class="dropdown-item" href="/'.concat(guild.id,"/").concat(guild.slug,"/u/").concat(t.member_id,"/").concat(t.username?t.username.toLowerCase():"view member",'">').concat(t.username?t.username:"view member","</a>"):"","\n                                        </div>\n                                    </div>\n                                </li>\n                                ").concat(t.is_alt||t.raid_group_name||t.class?'\n                                    <li class="list-inline-item small">\n                                        '.concat(t.is_alt?'\n                                            <span class="text-warning font-weight-bold">'.concat(localeAlt,"</span>&nbsp;\n                                        "):"","\n                                        ").concat(t.raid_group_name?'\n                                            <span class="font-weight-bold d-inline tag">\n                                                <span class="role-circle" style="background-color:'.concat(getColorFromDec(parseInt(t.raid_group_color)),'"></span>\n                                                ').concat(t.raid_group_name?t.raid_group_name:"","\n                                            </span>&nbsp;\n                                        "):"","\n                                        ").concat(t.class?t.class:"","\n                                    </li>"):"","\n                                ").concat(!guild.is_attendance_hidden&&(t.attendance_percentage||t.raid_count||t.benched_count)?'<li class="list-inline-item small">\n                                        <ul class="list-inline">\n                                            '.concat(t.raid_count&&"number"==typeof t.attendance_percentage?'<li class="list-inline-item '.concat(getAttendanceColor(t.attendance_percentage),'" title="attendance">').concat(Math.round(100*t.attendance_percentage),"%</li>"):"","\n                                            ").concat(t.raid_count?'<li class="list-inline-item small text-muted">'.concat(t.raid_count," raid").concat(t.raid_count>1?"s":"","</li>"):"","\n                                            ").concat(t.benched_count?'<li class="list-inline-item small text-muted">benched '.concat(t.benched_count,"x</li>"):"","\n                                        </ul>\n                                    </li>"):"","\n                                ").concat(t.level||t.race||t.spec?'\n                                    <li class="list-inline-item small">\n                                        <span class="small text-muted">\n                                            <span class="font-weight-bold">\n                                                '.concat(t.race?t.race:"","\n                                                ").concat(t.spec_label?t.spec_label:t.spec?t.spec:"","\n                                                ").concat(t.archetype?t.archetype:"","\n                                            </span>\n                                        </span>\n                                    </li>"):"","\n                                ").concat(showEdit?'<li class="list-inline-item small">\n                                        '.concat(t.is_received_unlocked?'<li class="list-inline-item small text-warning" title="To lock, edit the member that owns this character">loot unlocked</li>':"","\n                                        ").concat(t.is_wishlist_unlocked?'<li class="list-inline-item small text-warning" title="To lock, edit the member that owns this character">wishlist unlocked</li>':"","\n                                    </li>"):"","\n                            </ul>\n                        </li>\n                    </ul>")},visible:!0,width:"250px",className:"width-250"},{title:'<span class="text-gold fas fa-fw fa-sort-amount-down"></span> '.concat(headerPrios," by dungeon"),data:"prios",render:function render(a,e,t){return a&&a.length?'\n                    <ul class="no-bullet no-indent">\n                        <li data-instance-id="">999 total</li>\n                        <li data-instance-id="">101 Kara</li>\n                        <li data-instance-id="">102 Gruul</li>\n                        <li data-instance-id="">103 Mag</li>\n                        <li data-instance-id="">104 SSC</li>\n                        <li data-instance-id="">105 Hyjal</li>\n                        <li data-instance-id="">106 TK</li>\n                        <li data-instance-id="">107 BT</li>\n                        <li data-instance-id="">108 ZA</li>\n                        <li data-instance-id="">109 Sunwell</li>\n                        <li data-instance-id="">110 World Bosses</li>\n                    </ul>\n                    OR\n                    <ul class="no-bullet no-indent">\n                        <li data-instance-id="">999 total</li>\n                        <li data-instance-id="">101 avg B+ Kara</li>\n                        <li data-instance-id="">102 avg B+ Gruul</li>\n                        <li data-instance-id="">103 avg B+ Mag</li>\n                        <li data-instance-id="">104 avg B+ SSC</li>\n                        <li data-instance-id="">105 avg B+ Hyjal</li>\n                        <li data-instance-id="">106 avg B+ TK</li>\n                        <li data-instance-id="">107 avg B+ BT</li>\n                        <li data-instance-id="">108 avg B+ ZA</li>\n                        <li data-instance-id="">109 avg B+ Sunwell</li>\n                        <li data-instance-id="">110 avg B+ World Bosses</li>\n                    </ul>\n                    ':"—"},orderable:!0,visible:!!showPrios,width:"100px",className:"width-100"},{title:'<span class="text-gold fas fa-fw fa-sort-amount-down"></span> '.concat(headerPrios," by tier"),data:"prios",render:function render(a,e,t){return a&&a.length?'\n                    <ul class="no-bullet no-indent">\n                        <li data-instance-id="">999 total</li>\n                        <li data-instance-id="">B++ avg</li>\n                        <li data-instance-id="">101 S</li>\n                        <li data-instance-id="">102 A</li>\n                        <li data-instance-id="">103 B</li>\n                        <li data-instance-id="">104 C</li>\n                        <li data-instance-id="">105 D</li>\n                        <li data-instance-id="">106 F</li>\n                    </ul>\n                    ':"—"},orderable:!0,visible:!!showPrios,width:"100px",className:"width-100"},{title:'<span class="text-gold fas fa-fw fa-sort-amount-down"></span> '.concat(headerReceived," by dungeon"),data:"received",render:function render(a,e,t){return a&&a.length?'\n                    <ul class="no-bullet no-indent">\n                        <li data-instance-id="">999 total</li>\n                        <li data-instance-id="">101 Kara</li>\n                        <li data-instance-id="">102 Gruul</li>\n                        <li data-instance-id="">103 Mag</li>\n                        <li data-instance-id="">104 SSC</li>\n                        <li data-instance-id="">105 Hyjal</li>\n                        <li data-instance-id="">106 TK</li>\n                        <li data-instance-id="">107 BT</li>\n                        <li data-instance-id="">108 ZA</li>\n                        <li data-instance-id="">109 Sunwell</li>\n                        <li data-instance-id="">110 World Bosses</li>\n                    </ul>\n                    ':"—"},orderable:!0,visible:!!showPrios,width:"100px",className:"width-100"},{title:'<span class="text-gold fas fa-fw fa-sort-amount-down"></span> '.concat(headerReceived," by tier"),data:"received",render:function render(a,e,t){return a&&a.length?'\n                    <ul class="no-bullet no-indent">\n                        <li data-instance-id="">999 total</li>\n                        <li data-instance-id="">B++ avg</li>\n                        <li data-instance-id="">101 S</li>\n                        <li data-instance-id="">102 A</li>\n                        <li data-instance-id="">103 B</li>\n                        <li data-instance-id="">104 C</li>\n                        <li data-instance-id="">105 D</li>\n                        <li data-instance-id="">106 F</li>\n                    </ul>\n                    ':"—"},orderable:!0,visible:!!showPrios,width:"100px",className:"width-100"},{title:'<span class="text-gold fas fa-fw fa-sort-amount-down"></span> '.concat(headerWishlist," by dungeon"),data:"received",render:function render(a,e,t){return a&&a.length?'\n                    <ul class="no-bullet no-indent">\n                        <li data-instance-id="">999 received, 888 wished</li>\n                        <li data-instance-id="">101r, 102w Kara</li>\n                        <li data-instance-id="">103r, 104w Gruul</li>\n                        <li data-instance-id="">105r, 106w Mag</li>\n                        <li data-instance-id="">107r, 108w SSC</li>\n                        <li data-instance-id="">109r, 110w Hyjal</li>\n                        <li data-instance-id="">111r, 112w TK</li>\n                        <li data-instance-id="">113r, 114w BT</li>\n                        <li data-instance-id="">115r, 116w ZA</li>\n                        <li data-instance-id="">117r, 118w Sunwell</li>\n                        <li data-instance-id="">119r, 120w World Bosses</li>\n                    </ul>\n                    ':"—"},orderable:!0,visible:!!showPrios,width:"100px",className:"width-100"},{title:'<span class="text-gold fas fa-fw fa-sort-amount-down"></span> '.concat(headerWishlist," by tier"),data:"received",render:function render(a,e,t){return a&&a.length?'\n                    <ul class="no-bullet no-indent">\n                        <li data-instance-id="">999 total</li>\n                        <li data-instance-id="">B++ avg</li>\n                        <li data-instance-id="">101 S</li>\n                        <li data-instance-id="">102 A</li>\n                        <li data-instance-id="">103 B</li>\n                        <li data-instance-id="">104 C</li>\n                        <li data-instance-id="">105 D</li>\n                        <li data-instance-id="">106 F</li>\n                    </ul>\n                    ':"—"},orderable:!0,visible:!!showPrios,width:"100px",className:"width-100"}],order:[],paging:!1,fixedHeader:!0,drawCallback:function drawCallback(){callRosterHandlers()},initComplete:function initComplete(){var a=[colClass,colRaidGroup];this.api().columns().every(function(e){var t=this,n=null,i=null;e==colClass?(n=$("#class_filter"),i=null):e==colRaidGroup&&(n=$("#raid_group_filter"),i=null),a.includes(e)&&(n.on("change",function(){var a=$.fn.dataTable.util.escapeRegex($(this).val());i&&i.val()&&(_readOnlyError("val"),a="(?=.*"+a+")(?=.*"+$.fn.dataTable.util.escapeRegex(i.val())+")"),t.search(a||"",!0,!1).draw()}).change(),i&&i.on("change",function(){var a=$.fn.dataTable.util.escapeRegex($(this).val());n&&n.val()&&(_readOnlyError("val"),a="(?=.*"+a+")(?=.*"+$.fn.dataTable.util.escapeRegex(n.val())+")"),t.search(a||"",!0,!1).draw()}).change()),"undefined"!=typeof filterWishlistsByItemName&&filterWishlistsByItemName&&e==colWishlist&&$("#wishlist_filter").on("change",function(){var a="("+itemNames.join("|")+")";t.search(a,!0,!1).draw()})}),callRosterHandlers()}}),rosterTable}function addClippedItemHandlers(){$(".js-show-clipped-items").click(function(){var a=$(this).data("id"),e=$(this).data("type");$(".js-clipped-item[data-id='"+a+"'][data-type='"+e+"']").show(),$(".js-show-clipped-items[data-id='"+a+"'][data-type='"+e+"']").hide(),$(".js-hide-clipped-items[data-id='"+a+"'][data-type='"+e+"']").show(),strikethroughVisible||hideStrikethroughItems(),offspecVisible||hideOffspecItems()}),$(".js-hide-clipped-items").click(function(){var a=$(this).data("id"),e=$(this).data("type");$(".js-clipped-item[data-id='"+a+"'][data-type='"+e+"']").hide(),$(".js-show-clipped-items[data-id='"+a+"'][data-type='"+e+"']").show(),$(".js-hide-clipped-items[data-id='"+a+"'][data-type='"+e+"']").hide()})}function addInstanceFilterHandlers(){$("#instance_filter").change(function(){var a=$("#instance_filter").val();if(a.length){allItemsVisible=!1,$(".js-show-all-clipped-items").click(),$(".js-show-all-clipped-items").hide(),$(".js-show-clipped-items").hide(),$(".js-hide-clipped-items").hide(),$("li.js-has-instance").hide();var e="";a.forEach(function(a){e+="li.js-has-instance[data-instance-id='"+a+"'],"}),e=e.replace(/(^,)|(,$)/g,""),$(e).show()}else $("li.js-has-instance").show(),allItemsVisible=!0,$(".js-show-all-clipped-items").click(),$(".js-show-all-clipped-items").show(),$(".js-show-clipped-items").show(),$(".js-hide-clipped-items").hide()})}function addWishlistFilterHandlers(){$("#wishlist_filter").on("change",function(){currentWishlistNumber=$(this).val(),rosterTable.rows().invalidate().draw()}).change()}function getItemListHtml(a,e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,o='<ol class="no-indent js-item-list mb-2 '.concat(l,'" data-type="').concat(e,'" data-id="').concat(t,'" style="').concat(s?"":"display:none;",'">');c&&(o+='<li class="small text-muted no-bullet " data-type="'.concat(e,'" data-id="').concat(t,'">').concat(c,"</li>"));var d=4,r=null,u=null;return $.each(a,function(l,s){var c=!1;if(l>=4&&(c=!0,4==l&&(o+='<li class="js-show-clipped-items small cursor-pointer no-bullet " data-type="'.concat(e,'" data-id="').concat(t,'">show ').concat(a.length-4," more…</li>"))),"prio"==e&&s.pivot.raid_group_id&&s.pivot.raid_group_id!=u){u=s.pivot.raid_group_id;var d="";if(raidGroups.length){var h=raidGroups.find(function(a){return a.id===s.pivot.raid_group_id});h&&(d=h.name)}o+='\n                <li data-raid-group-id="" class="'.concat(c?"js-clipped-item":"",' js-item-wishlist-character no-bullet font-weight-normal font-italic text-muted small"\n                    style="').concat(c?"display:none;":"",'"\n                    data-type="').concat(e,'"\n                    data-id="').concat(t,'">\n                    ').concat(d,"\n                </li>\n            ")}i&&s.instance_id&&s.instance_id!=r&&(r=s.instance_id,o+='\n                <li class="js-has-instance '.concat(c?"js-clipped-item":"",' no-bullet font-weight-normal font-italic text-muted small"\n                    style="').concat(c?"display:none;":"",'"\n                    data-type="').concat(e,'"\n                    data-id="').concat(t,'"\n                    data-instance-id="').concat(s.instance_id,'">\n                    ').concat(s.instance_name,"\n                </li>\n            "));var p='data-wowhead-link="https://'.concat(wowheadLocale+wowheadSubdomain,".wowhead.com/item=").concat(s.item_id,'"\n            data-wowhead="item=').concat(s.item_id,"?domain=").concat(wowheadLocale+wowheadSubdomain,'"');o+='\n            <li class="js-has-instance font-weight-normal '.concat(c?"js-clipped-item":"",'"\n                data-type="').concat(e,'"\n                data-id="').concat(t,'"\n                data-offspec="').concat(s.pivot.is_offspec?1:0,'"\n                data-instance-id="').concat(s.instance_id,'"\n                data-wishlist-number="').concat(s.list_number,'"\n                value="').concat(n?s.pivot.order:"",'"\n                style="').concat(c?"display:none;":"",'">\n                ').concat(guild.tier_mode?'<span class="text-monospace font-weight-medium text-tier-'.concat(s.guild_tier?s.guild_tier:"",'">').concat(s.guild_tier?getItemTierLabel(s,guild.tier_mode):"&nbsp;","</span>"):"",'\n                <a href="/').concat(guild.id,"/").concat(guild.slug,"/i/").concat(s.item_id,"/").concat(slug(s.name),'"\n                    class="').concat(s.quality?"q"+s.quality:""," ").concat(!s.pivot.is_received||"wishlist"!=s.pivot.type&&"prio"!=s.pivot.type?"":"font-strikethrough",'"\n                    ').concat(p,">\n                    ").concat(s.name,"\n                </a>\n                ").concat(s.pivot.is_offspec?'<span title="offspec item" class="small font-weight-bold text-muted">OS</span>':"",'\n                <span class="js-watchable-timestamp js-timestamp-title smaller text-muted"\n                    data-timestamp="').concat(s.pivot.received_at?s.pivot.received_at:s.pivot.created_at,'"\n                    data-title="added by ').concat(s.added_by_username,' at"\n                    data-is-short="1">\n                </span>\n            </li>')}),a.length>4&&(o+='<li class="js-hide-clipped-items small cursor-pointer no-bullet" style="display:none;" data-type="'.concat(e,'" data-id="').concat(t,'">show less</li>')),o+="</ol>"}function getNotes(a,e,t){var n="";return t.secondary_raid_groups&&t.secondary_raid_groups.length&&(n='<ul class="list-inline">',t.secondary_raid_groups.forEach(function(a,e){n+='<li class="list-inline-item small"><span class="tag text-muted"><span class="role-circle align-fix" style="background-color:'.concat(getColorFromDec(parseInt(a.color)),'"></span>').concat(a.name,"</span></li>")}),n+="</ul>"),(t.public_note?'<span class="js-markdown-inline">'.concat(DOMPurify.sanitize(nl2br(t.public_note)),"</span>"):"—")+(t.officer_note?'<br><small class="font-weight-bold font-italic text-gold">Officer\'s Note</small><br><span class="js-markdown-inline">'.concat(DOMPurify.sanitize(nl2br(t.officer_note)),"</span>"):"")+(n?"<br>".concat(n):"")}function hideOffspecItems(){$("[data-offspec='1']").hide()}function showOffspecItems(){$("[data-offspec='1']:not(.js-clipped-item)").show()}function hideStrikethroughItems(){$("[data-type='prio']").children(".font-strikethrough").parent().hide(),$("[data-type='wishlist']").children(".font-strikethrough").parent().hide()}function showStrikethroughItems(){$("[data-type='prio']:not(.js-clipped-item)").children(".font-strikethrough").parent().show(),$("[data-type='wishlist']:not(.js-clipped-item)").children(".font-strikethrough").parent().show()}function resetItemVisibility(){$(".js-clipped-item").hide(),$(".js-show-clipped-items").show(),$(".js-hide-clipped-items").hide()}function callRosterHandlers(){rosterHandlersTimeout&&clearTimeout(rosterHandlersTimeout),rosterHandlersTimeout=setTimeout(function(){makeWowheadLinks(),addClippedItemHandlers(),addWishlistSortHandlers(),parseMarkdown(),trackTimestamps(),allItemsVisible?showAllItems():resetItemVisibility()},500)}function showAllItems(){$(".js-clipped-item").show(),$(".js-show-clipped-items").hide(),$(".js-hide-clipped-items").hide()}$(document).ready(function(){var a=createRosterMainTable();$(".toggle-column").click(function(e){e.preventDefault();var t=a.column($(this).attr("data-column"));t.visible(!t.visible())}),$(".toggle-column-default").click(function(e){e.preventDefault(),a.column(colName).visible(!0),a.column(colRoles).visible(!1),a.column(colLoot).visible(!0),a.column(colWishlist).visible(!0),a.column(colRecipes).visible(!1),a.column(colNotes).visible(!0)}),a.on("column-visibility.dt",function(a,e,t,n){callRosterHandlers()}),$(".js-show-all-clipped-items").click(function(){allItemsVisible?(allItemsVisible=!1,resetItemVisibility()):(allItemsVisible=!0,showAllItems())}),$(".js-sort-by-raids-attended").click(function(){a.order(colRaidsAttended,"desc").draw()}),$(".js-hide-strikethrough-items").click(function(){strikethroughVisible?(strikethroughVisible=!1,hideStrikethroughItems()):(strikethroughVisible=!0,showStrikethroughItems())}),$(".js-hide-offspec-items").click(function(){offspecVisible?(offspecVisible=!1,hideOffspecItems()):(offspecVisible=!0,showOffspecItems())}),$(".selectpicker").selectpicker("refresh"),$(".loadingBarContainer").removeClass("d-flex").hide(),$("#characterDatatable").show(),addInstanceFilterHandlers(),addWishlistFilterHandlers(),callRosterHandlers()});
